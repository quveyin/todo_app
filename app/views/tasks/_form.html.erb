<div class="form-container">
  <%= form_with(model: task, local: true) do |form| %>
    <% if task.errors.any? %>
      <div class="error-messages">
        <h3>Lütfen aşağıdaki hataları düzeltin:</h3>
        <ul>
          <% if task.errors[:title].present? %>
            <% if task.errors[:title].include?("can't be blank") %>
              <li>Görev başlığı boş bırakılamaz</li>
            <% end %>
            <% if task.errors[:title].any? { |msg| msg.include?("too short") } %>
              <li>Görev başlığı çok kısa (en az 1 karakter olmalı)</li>
            <% end %>
            <% if task.errors[:title].any? { |msg| msg.include?("too long") } %>
              <li>Görev başlığı çok uzun (en fazla 255 karakter olmalı)</li>
            <% end %>
          <% end %>
          <% if task.errors[:completed].present? %>
            <li>Tamamlanma durumu geçersiz</li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= form.label :title, 'Görev Başlığı', class: 'form-label' %>
      <%= form.text_field :title, class: 'form-input', placeholder: 'Görev başlığını girin...' %>
    </div>

    <% if task.persisted? %>
      <div class="form-group checkbox-group">
        <%= form.check_box :completed, class: 'form-checkbox' %>
        <%= form.label :completed, 'Tamamlandı olarak işaretle', class: 'checkbox-label' %>
      </div>
    <% end %>

    <div class="form-actions">
      <%= form.submit task.persisted? ? 'Görevi Güncelle' : 'Görev Oluştur', class: 'btn btn-primary' %>
      <%= link_to 'İptal', tasks_path, class: 'btn btn-secondary' %>
    </div>
  <% end %>
</div>